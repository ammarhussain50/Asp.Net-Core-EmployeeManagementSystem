<div class="p-4">
  <!-- Header -->
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-semibold">Leave Applications</h2>
  </div>

  <!-- Loader -->
  @if (loading) {
    <div class="flex justify-center p-8">
      <lucide-icon name="LoaderCircle" class="animate-spin w-6 h-6 text-gray-500"></lucide-icon>
    </div>
  }

  <!-- Table -->
  @if (!loading && leaves.length > 0) {
    <div>
      <table class="w-full border text-sm border-gray-200">
        <thead class="bg-gray-100 text-left">
          <tr>
            <th class="p-2 border">ID</th>
            <th class="p-2 border">Type</th>
            <th class="p-2 border">Reason</th>
            <th class="p-2 border">Leave Date</th>
            <th class="p-2 border">Status</th>
            <th class="p-2 border text-center">Action</th>
          </tr>
        </thead>

        <tbody>
          @for (leave of leaves; track leave.id) {
            <tr class="border-t hover:bg-gray-50">
              <td class="p-2 border">{{ leave.id }}</td>
                <!-- ✅ Type mapping here -->
              <td class="p-2 border">
                {{
                  leave.type === 1
                    ? 'Sick Leave'
                    : leave.type === 2
                    ? 'Casual Leave'
                    : leave.type === 3
                    ? 'Earned Leave'
                    : 'Unknown'
                }}
              </td>
              <td class="p-2 border">{{ leave.reason }}</td>
              <td class="p-2 border">{{ leave.leaveDate | date }}</td>
            <td class="p-2 border">
  <span
    class="font-medium"
    [class.text-yellow-600]="leave.status === 0"
    [class.text-green-600]="leave.status === 1"
    [class.text-red-600]="leave.status === 2 || leave.status === 3"
  >
    {{ leave.status === 0
      ? 'Pending'
      : leave.status === 1
      ? 'Approved'
      : 'Cancelled' }}
  </span>
</td>

              <!-- <td class="p-2 border text-center">
                <button
                  class="text-red-600 hover:text-red-800"
                  title="Cancel Leave"
                  (click)=""
                >
                  <lucide-icon [name]="Trash2" class="w-4 h-4"></lucide-icon>
                </button>
              </td> -->
            </tr>
          }
        </tbody>
      </table>

     <!-- ✅ Pagination Section -->
      <div
        class="flex justify-between items-center px-6 py-4 bg-white border-t border-gray-200"
      >
        <!-- Showing Info -->
        <p class="text-sm text-gray-600">
          Showing
          <span class="font-medium">{{ pageIndex * pageSize + 1 }}</span>
          -
          <span class="font-medium">
            {{ Math.min((pageIndex + 1) * pageSize, totalCount) }}
          </span>
          of
          <span class="font-medium">{{ totalCount }}</span> leaves
        </p>

        <!-- Buttons -->
        <div class="flex items-center gap-2">
          <button
            (click)="onPageChange(pageIndex - 1)"
            [disabled]="pageIndex === 0"
            class="px-3 py-1.5 text-sm rounded-lg border border-gray-300 
                   hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            Prev
          </button>

          <span class="text-sm text-gray-700">
            Page {{ pageIndex + 1 }} of
            {{ Math.ceil(totalCount / pageSize) }}
          </span>

          <button
            (click)="onPageChange(pageIndex + 1)"
            [disabled]="(pageIndex + 1) * pageSize >= totalCount"
            class="px-3 py-1.5 text-sm rounded-lg border border-gray-300 
                   hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            Next
          </button>
        </div>
      </div>
    </div>
  }

  <!-- No Data -->
  @if (!loading && leaves.length === 0) {
    <div class="text-center text-gray-500 p-8">
      No leave applications found.
    </div>
  }
</div>
